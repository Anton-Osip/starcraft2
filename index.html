<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="css/reset.css" />
		<link rel="stylesheet" href="css/font-awesome.min.css" />
		<link rel="stylesheet" href="css/style.css" />
		<title>Моя раса в Starcraft 2</title>
	</head>
	<body>
		<div class="main">
			<div class="app" v-show="showMain">
				<div class="app__header">
					<img src="img/logo.png" alt="LOGO" class="app__logo" />
				</div>
				<div class="app__body">
					<button class="app__btn" @click="goToQuestions">
						<i class="fa fa-play-circle-o" aria-hidden="true"></i>
						<div class="app__btn-text">Начать</div>
					</button>
					<button class="app__btn" @click="goToAchivment">
						<i class="fa fa-trophy" aria-hidden="true"></i>
						<div class="app__btn-text">Достижение</div>
					</button>
					<button class="app__btn" @click="goToSocial">
						<i class="fa fa-user" aria-hidden="true"></i>
						<div class="app__btn-text">Автор</div>
					</button>
					<button class="app__btn btn-sound">
						<i class="fa fa-volume-up" aria-hidden="true"></i>
						<div class="app__btn-text">Звук</div>
					</button>
				</div>
			</div>

			<div class="app achivments" v-show="showAchivment">
				<div class="app__body">
					<div class="app__body-inner">
						<h2 class="app__body-title">
							<i class="fa fa-trophy" aria-hidden="true"></i>
							Достижения
						</h2>
						<div class="app__body-top">
							<div class="app__card">
								<div class="app__card-text">Счет</div>
								<div class="app__card-count">0</div>
							</div>
							<div class="app__card">
								<div class="app__card-text">Открыто рас</div>
								<div class="app__card-count">0</div>
							</div>
							<div class="app__card">
								<div class="app__card-text">Всего игр</div>
								<div class="app__card-count">0</div>
							</div>
							<div class="app__card">
								<div class="app__card-text">Любимая раса</div>
								<div class="app__card-count">0</div>
							</div>
						</div>
						<div class="app__body-middle">
							<div class="app__result">
								<div class="app__result-score">
									<i class="fa fa-star" aria-hidden="true"></i>
									<div class="app__result-count">150</div>
								</div>
								<div class="app__result-name">Зерг</div>
								<div class="app__result-amount">5</div>
							</div>
						</div>
						<div class="app__body-bottom">
							<button class="app__btn btn__back btn__achivment">
								<i class="fa fa-reply" aria-hidden="true"></i>
							</button>
						</div>
					</div>
				</div>
			</div>

			<div class="app" v-show="showQuestions">
				<div class="app__header">
					<div class="app__header-inner">
						<div class="app__count"># {{number+1}}</div>
						<div class="app__text">{{questions[number][0]}}</div>
					</div>
				</div>
				<div class="app__body">
					<button
						class="app__btn"
						v-for="(answer,i) in questions[number][1]"
						@click="nextQuestions(questions[number][2][i])"
					>
						<div class="app__btn-text">{{answer}}</div>
					</button>
				</div>
			</div>

			<div class="app" v-show="showSocial">
				<div class="app__body">
					<a href="#" class="app__btn" target="_blank">
						<i class="fa fa-instagram" aria-hidden="true"></i>
						<div class="app__btn-text">Instagram</div>
					</a>
					<a href="#" class="app__btn" target="_blank">
						<i class="fa fa-twitter" aria-hidden="true"></i>
						<div class="app__btn-text">Twitter</div>
					</a>
					<a href="#" class="app__btn" target="_blank">
						<i class="fa fa-facebook" aria-hidden="true"></i>
						<div class="app__btn-text">Facebook</div>
					</a>
					<a href="#" class="app__btn" target="_blank">
						<i class="fa fa-vk" aria-hidden="true"></i>
						<div class="app__btn-text">Vkontakte</div>
					</a>
					<a href="#" class="app__btn" target="_blank">
						<i class="fa fa-youtube-play" aria-hidden="true"></i>
						<div class="app__btn-text">Youtube</div>
					</a>
					<button class="app__btn btn__back" @click="goToMain">
						<i class="fa fa-reply" aria-hidden="true"></i>
					</button>
				</div>
			</div>

			<div class="app results" :data-race="resultRace" v-show="showResults">
				<div class="app__body">
					<div class="app__results-inner">
						<div class="results__title">{{results[resultRace].name}}</div>
						<div class="results__img">
							<img :src="'img/'+resultRace+'_logo.png'" />
						</div>
						<div class="results__text-box">
							<p class="results__text">{{results[resultRace].description}}</p>
							<p class="results__quote">{{results[resultRace].quote1}}</p>
							<p class="results__quote">{{results[resultRace].quote2}}</p>
							<p class="results__author">{{results[resultRace].author}}</p>
						</div>
						<div>
							<button :class="'app__btn btn__back btn__'+resultRace" @click="goToAchivment">
								<i class="fa fa-reply" aria-hidden="true"></i>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="js/vue.js"></script>
		<script src="js/const.js"></script>
		<script>
			let app = new Vue({
				el: '.main',
				data: {
					showMain: true,
					showSocial: false,
					showAchivment: false,
					showQuestions: false,
					showResults: false,
					number: 0,
					score: {
						zerg: 0,
						primal: 0,
						protoss: 0,
						tildarim: 0,
						terran: 0,
						infested: 0,
						hybrid: 0,
					},
					totalGame: localStorage.getItem('sc2TotalGame')
						? JSON.parse(localStorage.getItem('sc2TotalGame'))
						: {
								zerg: 0,
								primal: 0,
								protoss: 0,
								taldarim: 0,
								terran: 0,
								infested: 0,
								hybrid: 0,
						  },
					totalGames: localStorage.getItem('sc2TotalGames') ? localStorage.getItem('sc2TotalGames') : 0,
					questions: questions,
					results: results,
					resultRace: 'infested',
				},
				methods: {
					goToMain() {
						this.showMain = true
						this.showSocial = false
						this.showAchivment = false
						this.showQuestions = false
						this.showResults = false
					},
					goToSocial() {
						this.showMain = false
						this.showSocial = true
						this.showAchivment = false
						this.showQuestions = false
						this.showResults = false
					},
					goToAchivment() {
						if (this.totalGames > 0) {
							this.showMain = false
							this.showSocial = false
							this.showAchivment = true
							this.showQuestions = false
							this.showResults = false
						} else {
							this.goToQuestions()
						}
					},
					goToQuestions() {
						this.score = {
							zerg: 0,
							primal: 0,
							protoss: 0,
							taldarim: 0,
							terran: 0,
							infested: 0,
							hybrid: 0,
						}
						this.showMain = false
						this.showSocial = false
						this.showAchivment = false
						this.showQuestions = true
						this.showResults = false
					},
					goToResults(race) {
						
						this.showMain = false
						this.showSocial = false
						this.showAchivment = false
						this.showQuestions = false
						this.showResults = true
						this.resultRace = race
					},
					nextQuestions(answer) {
						if (this.number == 24) {
							this.number = 0
							this.endGame()
						} else {
							this.number++
						}
						eval(answer)
					},
					endGame() {
						this.totalGames++
						localStorage.setItem('sc2TotalGames', this.totalGames)
						// zerg
						if (
							this.score.zerg > this.score.protoss &&
							this.score.zerg > this.score.terran &&
							this.score.zerg < 8 &&
							Math.abs(this.score.protoss - this.score.zerg) > 3
						) {
							this.goToResults('zerg')
							this.totalGame.zerg++
						} else if (
							//primal
							this.score.primal > this.score.protoss &&
							this.score.primal > this.score.terran &&
							this.score.primal == 8
						) {
							this.goToResults('primal')
							this.totalGame.primal++
						} else if (
							//protoss
							this.score.protoss > this.score.zerg &&
							this.score.protoss > this.score.terran &&
							this.score.taldarim < 5 &&
							Math.abs(this.score.protoss - this.score.zerg) > 3
						) {
							this.goToResults('protoss')
							this.totalGame.protoss++
						} else if (
							//taldarim
							this.score.protoss > this.score.zerg &&
							this.score.protoss > this.score.terran &&
							this.score.taldarim == 5
						) {
							this.goToResults('taldarim')
							this.totalGame.taldarim++
						} else if (
							//terran
							this.score.terran > this.score.zerg &&
							this.score.terran > this.score.protoss
						) {
							this.goToResults('terran')
							this.totalGame.terran++
						} else if (
							//hybrid
							Math.abs(this.score.protoss - this.score.zerg) <= 3
						) {
							this.goToResults('hybrid')
							this.totalGame.hybrid++
						} else {
							//infested
							this.goToResults('infested')
							this.totalGame.infested++
						}
						localStorage.setItem('sc2TotalGame', JSON.stringify(this.totalGame))
					},
				},
			})
		</script>
	</body>
</html>
